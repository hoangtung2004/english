<%- include('partials/head') %>
<style>
    /* --- General Improvements --- */
    .btn-primary {
        background-color: #007BFF;
        border-color: #007BFF;
        transition: background-color 0.2s ease-in-out;
    }

    .btn-primary:hover, .btn-primary:focus {
        background-color: #0056b3;
        border-color: #0056b3;
    }

    .nav-link:hover, .nav-link:focus {
        color: #fff !important;
        text-decoration: underline;
    }

    /* --- Home Page Specific --- */
    .home-feature {
        border: 1px solid #e9ecef;
        border-radius: 1rem; /* Bo tròn mạnh hơn */
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); /* Thêm bóng đổ nhẹ */
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }

    .home-feature:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }
    
    .feature-icon {
        width: 48px;
        height: 48px;
        color: #007BFF;
    }

    /* --- Responsive Design --- */
    @media (max-width: 768px) {
        .navbar-nav {
            align-items: flex-start !important;
        }
        .home-feature {
            margin-bottom: 1.5rem;
        }
        .home-feature-row .col-md-4 {
            flex: 0 0 100%;
            max-width: 100%;
        }
    }
</style>

<%- include('partials/header') %>

    <div class="container mt-5">
        <div class="row">
            <div class="col-lg-10 offset-lg-1 text-center">
                 <% if (user) { %>
                    <h1 class="display-5 mb-5">Chào mừng, <%= user.username %>! Hôm nay bạn muốn học gì?</h1>
                <% } else { %>
                    <h1 class="display-4 mb-4">Chào mừng đến với Học Tiếng Anh</h1>
                    <p class="lead mb-4">Học tiếng Anh hiệu quả với phương pháp học tập thông minh</p>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-center mb-5">
                        <a href="/auth/register" class="btn btn-primary btn-lg px-4 me-md-2">Bắt đầu ngay</a>
                        <a href="/auth/login" class="btn btn-outline-secondary btn-lg px-4">Mình đã có tài khoản</a>
                    </div>
                <% } %>
                
                <% if (user) { %>
                <div class="row mt-4 home-feature-row">
                    <div class="col-md-4 mb-4">
                        <div class="card home-feature h-100">
                            <div class="card-body d-flex flex-column align-items-center text-center p-4">
                                <svg class="feature-icon mb-3" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.51.989 2.51 2.82 0 1.45-.648 2.512-1.868 3.412C11.599 9.07 10.387 9.76 8.5 11.008V14a.5.5 0 0 1-.5.5zM8 4.255v.006a.25.25 0 0 1-.25-.25v-.005a.25.25 0 0 1 .25-.25zm1.5.025v.005a.25.25 0 0 1-.25-.25v-.005a.25.25 0 0 1 .25-.25zm-2.01.025A.25.25 0 0 1 7.24 4.5v-.005a.25.25 0 0 1 .25-.25zm-2.01.025A.25.25 0 0 1 5.23 4.5v-.005a.25.25 0 0 1 .25-.25zM8 15a.5.5 0 0 1-.5-.5V8.537c.834-.59 1.842-1.2 2.824-1.883 1.132-.79 1.84-1.608 1.84-2.58C12.164 2.89 11.102 2 9.637 2 8.173 2 7.02.73 6.053 1.687A7.5 7.5 0 0 0 8 15z"/></svg>
                                <h5 class="card-title">Bài học</h5>
                                <p class="card-text text-muted">Các chuyên đề ngữ pháp</p>
                                <a href="/lessons" class="btn btn-primary mt-auto">Xem bài học</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card home-feature h-100">
                            <div class="card-body d-flex flex-column align-items-center text-center p-4">
                                <svg class="feature-icon mb-3" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/><path d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"/></svg>
                                <h5 class="card-title">Từ vựng</h5>
                                <p class="card-text text-muted">Học và ôn tập từ vựng</p>
                                <a href="/vocabulary" class="btn btn-primary mt-auto">Học từ vựng</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card home-feature h-100">
                            <div class="card-body d-flex flex-column align-items-center text-center p-4">
                                 <svg class="feature-icon mb-3" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/></svg>
                                <h5 class="card-title">Luyện tập</h5>
                                <p class="card-text text-muted">Luyện tập với các bài tập</p>
                                <a href="/practice" class="btn btn-primary mt-auto">Luyện tập</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-4 home-feature-row">
                    <div class="col-md-4 mb-4">
                        <div class="card home-feature h-100">
                            <div class="card-body d-flex flex-column align-items-center text-center p-4">
                                <svg class="feature-icon mb-3" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M10.717 3.55A.5.5 0 0 1 11 4v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .717-.45zM9.354 4.146A.5.5 0 0 1 10 4.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .354-.447zM8 5.5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-1 0v-5a.5.5 0 0 1 .5-.5zM6.646 5.146A.5.5 0 0 1 7 5.5v5a.5.5 0 0 1-1 0v-5a.5.5 0 0 1 .646-.354zM5.283 6.45A.5.5 0 0 1 5.5 6.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .283-.45zM4 7.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1a.5.5 0 0 1 .5-.5zM2.717 8.55A.5.5 0 0 1 3 9v-2a.5.5 0 0 1 1 0v2a.5.5 0 0 1-.283.45zM1.354 8.146a.5.5 0 0 1 0 .708L.707 9.5a.5.5 0 0 1-.707-.707l.647-.646a.5.5 0 0 1 .707 0zm12-1.414a.5.5 0 0 1 .707 0l.647.646a.5.5 0 0 1-.707.708L12.646 7.854a.5.5 0 0 1 0-.708z"/></svg>
                                <h5 class="card-title">Bảng phiên âm IPA</h5>
                                <p class="card-text text-muted">Tra cứu và luyện tập các ký hiệu phiên âm quốc tế IPA.</p>
                                <a href="/ipa" class="btn btn-primary mt-auto">Xem bảng IPA</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card home-feature h-100">
                            <div class="card-body d-flex flex-column align-items-center text-center p-4">
                                <svg class="feature-icon mb-3" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M1.5 1.5A1.5 1.5 0 0 0 0 3v10a1.5 1.5 0 0 0 1.5 1.5h13A1.5 1.5 0 0 0 16 13V3a1.5 1.5 0 0 0-1.5-1.5H13V.5a.5.5 0 0 0-1 0v1H4V.5a.5.5 0 0 0-1 0v1H1.5zM4 3h8V2H4v1zM1.5 4h13v9h-13V4zm5.5 1a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-1 0v-5a.5.5 0 0 1 .5-.5z"/></svg>
                                <h5 class="card-title">Thi Thử TOEIC</h5>
                                <p class="card-text text-muted">Làm quen với cấu trúc đề thi TOEIC và kiểm tra trình độ của bạn.</p>
                                <a href="/toeic" class="btn btn-primary mt-auto">Danh sách đề thi TOEIC</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card home-feature h-100">
                            <div class="card-body d-flex flex-column align-items-center text-center p-4">
                               <svg class="feature-icon mb-3" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm5 0v3h4V4h-4z"/></svg>
                                <h5 class="card-title">Động từ bất quy tắc</h5>
                                <p class="card-text text-muted">Danh sách động từ bất quy tắc.</p>
                                <a href="/irregular-verbs" class="btn btn-primary mt-auto">Xem động từ</a>
                            </div>
                        </div>
                    </div>
                </div>
                <% } %>
            </div>
        </div>
    </div>

<%- include('partials/footer') %> 